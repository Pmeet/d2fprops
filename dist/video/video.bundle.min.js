
(function(){
  if (typeof document !== 'undefined' && !document.getElementById('d2f-video-styles')) {
    var style = document.createElement('style');
    style.id = 'd2f-video-styles';
    style.textContent = "/**\n * d2fprops / video\n * Styles for the video prop\n *\n * Supports both attribute conventions:\n * - Legacy: data-vdo, data-vdo-* (existing implementations)\n * - New: data-video, data-video-* (recommended for new projects)\n */\n\n/* ================================\n   Base Video Container\n   ================================ */\n\n[data-vdo],\n[data-video] {\n  position: relative;\n  width: 100%;\n  border-radius: inherit;\n  overflow: hidden;\n  background-color: #000;\n  background-position: center !important;\n  background-repeat: no-repeat !important;\n  background-size: cover !important;\n  cursor: pointer;\n}\n\n/* Default 16/9 ratio */\n[data-vdo]::before,\n[data-video]::before {\n  content: \"\";\n  display: block;\n  padding-top: 56.25%;\n}\n\n/* Custom ratio via CSS variable */\n[data-vdo][data-vdo-has-ratio]::before,\n[data-video][data-video-has-ratio]::before {\n  padding-top: var(--d2f-video-pt);\n}\n\n/* Inner player mount */\n[data-vdo] .d2f-video__inner,\n[data-video] .d2f-video__inner {\n  position: absolute;\n  inset: 0;\n}\n\n[data-vdo] iframe,\n[data-vdo] video,\n[data-video] iframe,\n[data-video] video {\n  width: 100%;\n  height: 100%;\n  display: block;\n  border: 0;\n}\n\n[data-vdo] .plyr,\n[data-video] .plyr {\n  height: 100%;\n}\n\n/* ================================\n   Preview Mode\n   ================================ */\n\n[data-vdo][data-vdo-mode=\"preview\"] .d2f-video__inner,\n[data-video][data-video-mode=\"preview\"] .d2f-video__inner {\n  pointer-events: none;\n  overflow: hidden;\n}\n\n/* Scale up YouTube iframe to crop out residual title bar and watermark */\n[data-vdo][data-vdo-mode=\"preview\"] .d2f-video__inner iframe,\n[data-video][data-video-mode=\"preview\"] .d2f-video__inner iframe {\n  transform: scale(1.15);\n  transform-origin: center center;\n}\n\n/* ================================\n   Cover Fit Mode\n   ================================ */\n\n/* Ensure inner container clips overflow for cover mode */\n[data-vdo].d2f-video--cover .d2f-video__inner,\n[data-video].d2f-video--cover .d2f-video__inner {\n  overflow: hidden;\n}\n\n/* Native object-fit for HTML5 video */\n[data-vdo].d2f-video--cover video,\n[data-video].d2f-video--cover video {\n  object-fit: cover;\n}\n\n/* CSS scaling trick for iframes (object-fit doesn't work on iframes) */\n[data-vdo].d2f-video--cover .d2f-video__inner iframe,\n[data-video].d2f-video--cover .d2f-video__inner iframe {\n  width: 300%;\n  height: 300%;\n  max-width: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n/* Override preview mode's scale(1.15) when cover is active */\n[data-vdo].d2f-video--cover[data-vdo-mode=\"preview\"] .d2f-video__inner iframe,\n[data-video].d2f-video--cover[data-video-mode=\"preview\"] .d2f-video__inner iframe {\n  width: 300%;\n  height: 300%;\n  max-width: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n/* ================================\n   Modal Overlay\n   ================================ */\n\n.d2f-video-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 999999;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  padding: 24px;\n  background: rgba(0, 0, 0, 0.72);\n}\n\n.d2f-video-modal.is-open {\n  display: flex;\n}\n\n/* ================================\n   Modal Panel\n   ================================ */\n\n.d2f-video-modal__panel {\n  position: relative;\n  width: 100%;\n  max-width: 940px;\n  border-radius: 16px;\n  overflow: hidden;\n  background: #000;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);\n}\n\n.d2f-video-modal__ratio {\n  position: relative;\n  width: 100%;\n  padding-top: 56.25%;\n}\n\n.d2f-video-modal__ratio[data-video-has-ratio=\"1\"] {\n  padding-top: var(--d2f-video-pt);\n}\n\n.d2f-video-modal__inner {\n  position: absolute;\n  inset: 0;\n}\n\n/* ================================\n   Close Button\n   ================================ */\n\n.d2f-video-modal__close {\n  position: fixed;\n  top: 16px;\n  right: 16px;\n  z-index: 1000000;\n  width: 44px;\n  height: 44px;\n  border: 0;\n  border-radius: 999px;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  display: none;\n  place-items: center;\n}\n\n.d2f-video-modal.is-open .d2f-video-modal__close {\n  display: grid;\n}\n\n.d2f-video-modal__close:hover {\n  background: rgba(0, 0, 0, 0.8);\n}\n\n/* ================================\n   Modal Media\n   ================================ */\n\n.d2f-video-modal iframe,\n.d2f-video-modal video {\n  width: 100%;\n  height: 100%;\n  display: block;\n  border: 0;\n}\n\n.d2f-video-modal .plyr {\n  height: 100%;\n}\n";
    document.head.appendChild(style);
  }
})();

"use strict";var d2f_video=(()=>{var _=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var K=(e,t)=>{for(var i in t)_(e,i,{get:t[i],enumerable:!0})},B=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of U(t))!G.call(e,n)&&n!==i&&_(e,n,{get:()=>t[n],enumerable:!(o=D(t,n))||o.enumerable});return e};var N=e=>B(_({},"__esModule",{value:!0}),e);var ie={};K(ie,{getYouTubeId:()=>A,init:()=>H,isVideoFileUrl:()=>O,isYouTubeUrl:()=>L,parseRatioToPaddingTop:()=>k,pickBestYouTubePoster:()=>Y});var d={ROOT:"data-vdo",SRC:"data-vdo-src",MODE:"data-vdo-mode",AUTOPLAY:"data-vdo-autoplay",MUTED:"data-vdo-muted",RATIO:"data-vdo-ratio",POSTER:"data-vdo-poster",PLAY_TOGGLE:"data-vdo-play-toggle",HAS_RATIO:"data-vdo-has-ratio",FIT:"data-vdo-fit"},s={ROOT:"data-video",SRC:"data-video-src",MODE:"data-video-mode",AUTOPLAY:"data-video-autoplay",MUTED:"data-video-muted",RATIO:"data-video-ratio",POSTER:"data-video-poster",PLAY_TOGGLE:"data-video-play-toggle",HAS_RATIO:"data-video-has-ratio",FIT:"data-video-fit"};function v(e,t,i){return e.getAttribute(t)??e.getAttribute(i)}var I="https://www.youtube-nocookie.com",r="d2f-video",p=null,b=null;function L(e){return/youtu\.be|youtube\.com/i.test(e||"")}function O(e){return/\.(mp4|webm|m4v)(\?.*)?$/i.test(e||"")}function A(e){if(!e)return null;let t=e.replace(/watch\?v=([^&?]+)\?/i,"watch?v=$1&"),i=[/(?:youtube\.com\/watch\?v=)([^&]+)/i,/(?:youtu\.be\/)([^?&]+)/i,/(?:youtube\.com\/embed\/)([^?&]+)/i,/[?&]v=([^&]+)/i];for(let o of i){let n=t.match(o);if(n&&n[1])return n[1]}return null}function k(e){if(!e||!e.includes("/"))return null;let[t,i]=e.split("/").map(o=>parseFloat(String(o).trim()));return!t||!i?null:`${i/t*100}%`}function j(e,t=2500){return new Promise(i=>{let o=new Image,n=!1,u=M=>{n||(n=!0,o.onload=null,o.onerror=null,i(M))},E=setTimeout(()=>u(!1),t);o.onload=()=>{clearTimeout(E),u(!0)},o.onerror=()=>{clearTimeout(E),u(!1)},o.src=e})}async function Y(e){let t=[`https://i.ytimg.com/vi/${e}/maxresdefault.jpg`,`https://i.ytimg.com/vi/${e}/sddefault.jpg`,`https://i.ytimg.com/vi/${e}/hqdefault.jpg`];for(let i of t)if(await j(i))return i;return t[t.length-1]}async function W(e,t){let i=v(e,s.POSTER,d.POSTER);if(i){e.style.backgroundImage=`url("${i}")`;return}if(!L(t))return;let o=A(t);if(!o||e.style.backgroundImage&&e.style.backgroundImage!=="none")return;let n=await Y(o);e.style.backgroundImage=`url("${n}")`}function T(e,t){e.querySelectorAll(`[${d.PLAY_TOGGLE}], [${s.PLAY_TOGGLE}]`).forEach(o=>{o.style.opacity=t?"0":"1",o.style.pointerEvents=t?"none":"",o.style.transition="opacity 0.25s ease"})}function g(){let e=document.querySelector(`.${r}-modal`);return e||(e=document.createElement("div"),e.className=`${r}-modal`,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Video dialog"),e.innerHTML=`
    <button class="${r}-modal__close" type="button" aria-label="Close video">
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.31 6.3-6.31z"/>
      </svg>
    </button>
    <div class="${r}-modal__panel" role="document">
      <div class="${r}-modal__ratio">
        <div class="${r}-modal__inner"></div>
      </div>
    </div>
  `,document.body.appendChild(e),e)}function h(e){if(p){try{p.destroy()}catch{}p=null}e&&(e.innerHTML="")}function P(){let e=document.querySelector(`.${r}-modal`);if(!e)return;let t=e.querySelector(`.${r}-modal__inner`);h(t),e.classList.remove("is-open"),document.documentElement.style.overflow="",document.body.style.overflow="",e._onKey&&(document.removeEventListener("keydown",e._onKey),e._onKey=void 0),b&&(te(b),typeof b.focus=="function"&&b.focus())}function R(){let e=g();e.classList.add("is-open"),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",e.querySelector(`.${r}-modal__close`)?.focus();let i=o=>{o.key==="Escape"&&P()};e._onKey=i,document.addEventListener("keydown",i)}function z(){let e=g(),t=e.querySelector(`.${r}-modal__panel`),i=e.querySelector(`.${r}-modal__close`);i?.addEventListener("click",P),e.addEventListener("click",o=>{t&&!t.contains(o.target)&&o.target!==i&&P()})}function J(e,t){let i=A(e);if(!i)return null;let o=new URLSearchParams({autoplay:t?"1":"0",rel:"0",playsinline:"1",modestbranding:"1"}),n=document.createElement("iframe");return n.src=`${I}/embed/${i}?${o.toString()}`,n.setAttribute("title","YouTube video"),n.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("frameborder","0"),n.loading="lazy",n}function V(e,t,i){let o=document.createElement("video");o.setAttribute("playsinline",""),o.setAttribute("controls",""),o.autoplay=t,o.muted=i;let n=document.createElement("source");return n.src=e,n.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",o.appendChild(n),o}function X(e){let t=A(e);if(!t)return null;let i=typeof window<"u"?window.location.origin:"",o=new URLSearchParams({autoplay:"1",mute:"1",loop:"1",playlist:t,controls:"0",modestbranding:"1",playsinline:"1",rel:"0",showinfo:"0",disablekb:"1",enablejsapi:"1",origin:i,iv_load_policy:"3",fs:"0",cc_load_policy:"0"}),n=document.createElement("iframe");return n.src=`${I}/embed/${t}?${o.toString()}`,n.setAttribute("title","Video preview"),n.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("frameborder","0"),n.loading="eager",n.style.pointerEvents="none",n}function Q(e){let t=document.createElement("video");t.setAttribute("playsinline",""),t.autoplay=!0,t.muted=!0,t.loop=!0,t.style.pointerEvents="none";let i=document.createElement("source");return i.src=e,i.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",t.appendChild(i),t}function C(e){try{window.Plyr&&(p=new window.Plyr(e,{controls:["play-large","play","progress","current-time","mute","volume","settings","fullscreen"]}))}catch{p=null}}function Z(e,t,i){if(L(t)){let o=X(t);o&&(i.appendChild(o),e._d2fPreviewEl=o,T(e,!0))}else if(O(t)){let o=Q(t);i.appendChild(o),e._d2fPreviewEl=o,T(e,!0),setTimeout(()=>{try{o.play()}catch{}},0)}}function x(e,t){e.contentWindow&&e.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:""}),I)}function ee(e){let t=e._d2fPreviewEl;t&&(t instanceof HTMLVideoElement?t.pause():t instanceof HTMLIFrameElement&&x(t,"pauseVideo"))}function te(e){let t=e._d2fPreviewEl;if(t)if(t instanceof HTMLVideoElement)try{t.play()}catch{}else t instanceof HTMLIFrameElement&&x(t,"playVideo")}function oe(e,t,i){let o=new IntersectionObserver(n=>{for(let u of n)if(u.isIntersecting){Z(e,t,i),o.disconnect();return}},{rootMargin:"0px 0px 200px 0px",threshold:0});o.observe(e)}function ne(e){if(e._d2fVideoInit)return;e._d2fVideoInit=!0;let t=v(e,s.SRC,d.SRC);if(!t)return;let o=e.hasAttribute(d.ROOT)?d:s,n=(v(e,s.MODE,d.MODE)||"modal").toLowerCase(),u=(v(e,s.AUTOPLAY,d.AUTOPLAY)||"1")==="1",E=(v(e,s.MUTED,d.MUTED)||"0")==="1",M=v(e,s.RATIO,d.RATIO),y=k(M);if(y&&(e.style.setProperty("--d2f-video-pt",y),e.setAttribute(o.HAS_RATIO,"1")),v(e,s.FIT,d.FIT)==="cover"&&e.classList.add(`${r}--cover`),n!=="preview"&&W(e,t),!e.querySelector(`.${r}__inner`)){let l=document.createElement("div");l.className=`${r}__inner`,e.appendChild(l)}e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button"),e.hasAttribute("aria-label")||e.setAttribute("aria-label",n==="preview"?"Play full video":"Play video");let w=e.querySelector(`.${r}__inner`);n==="preview"&&oe(e,t,w);let $=l=>{l&&(l.preventDefault(),l.stopPropagation()),b=e,n==="preview"?ee(e):w.innerHTML="";let S=n==="preview"?!0:u,q=n==="preview"?!1:E;if(L(t)){let a=J(t,S);if(!a)return;if(n==="inline"){w.appendChild(a),T(e,!0);try{window.Plyr&&(p=new window.Plyr(a))}catch{}}else{let f=g(),m=f.querySelector(`.${r}-modal__inner`);h(m);let c=f.querySelector(`.${r}-modal__ratio`);c&&(y?(c.style.setProperty("--d2f-video-pt",y),c.setAttribute("data-video-has-ratio","1")):(c.style.removeProperty("--d2f-video-pt"),c.removeAttribute("data-video-has-ratio"))),m?.appendChild(a);try{window.Plyr&&(p=new window.Plyr(a))}catch{}R()}return}if(O(t))if(n==="inline"){let a=V(t,u,E);w.appendChild(a),T(e,!0),a.addEventListener("ended",()=>T(e,!1),{once:!0}),C(a),setTimeout(()=>{try{a.play()}catch{}},0)}else{let a=g(),f=a.querySelector(`.${r}-modal__inner`);h(f);let m=a.querySelector(`.${r}-modal__ratio`);m&&(y?(m.style.setProperty("--d2f-video-pt",y),m.setAttribute("data-video-has-ratio","1")):(m.style.removeProperty("--d2f-video-pt"),m.removeAttribute("data-video-has-ratio")));let c=V(t,S,q);f?.appendChild(c),C(c),setTimeout(()=>{try{c.play()}catch{}},0),R()}};e.addEventListener("click",$),e.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),$(l))})}function H(){g(),z(),document.querySelectorAll(`[${d.ROOT}], [${s.ROOT}]`).forEach(ne)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",H):H();return N(ie);})();
