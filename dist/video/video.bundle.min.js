
(function(){
  if (typeof document !== 'undefined' && !document.getElementById('d2f-video-styles')) {
    var style = document.createElement('style');
    style.id = 'd2f-video-styles';
    style.textContent = "/**\n * d2fprops / video\n * Styles for the video prop\n *\n * Supports both attribute conventions:\n * - Legacy: data-vdo, data-vdo-* (existing implementations)\n * - New: data-video, data-video-* (recommended for new projects)\n */\n\n/* ================================\n   Base Video Container\n   ================================ */\n\n[data-vdo],\n[data-video] {\n  position: relative;\n  width: 100%;\n  border-radius: 16px;\n  overflow: hidden;\n  background-color: #000;\n  background-position: center !important;\n  background-repeat: no-repeat !important;\n  background-size: cover !important;\n  cursor: pointer;\n}\n\n/* Default 16/9 ratio */\n[data-vdo]::before,\n[data-video]::before {\n  content: \"\";\n  display: block;\n  padding-top: 56.25%;\n}\n\n/* Custom ratio via CSS variable */\n[data-vdo][data-vdo-has-ratio]::before,\n[data-video][data-video-has-ratio]::before {\n  padding-top: var(--d2f-video-pt);\n}\n\n/* Inner player mount */\n[data-vdo] .d2f-video__inner,\n[data-video] .d2f-video__inner {\n  position: absolute;\n  inset: 0;\n}\n\n[data-vdo] iframe,\n[data-vdo] video,\n[data-video] iframe,\n[data-video] video {\n  width: 100%;\n  height: 100%;\n  display: block;\n  border: 0;\n}\n\n[data-vdo] .plyr,\n[data-video] .plyr {\n  height: 100%;\n}\n\n/* ================================\n   Preview Mode\n   ================================ */\n\n[data-vdo][data-vdo-mode=\"preview\"] .d2f-video__inner,\n[data-video][data-video-mode=\"preview\"] .d2f-video__inner {\n  pointer-events: none;\n}\n\n/* ================================\n   Modal Overlay\n   ================================ */\n\n.d2f-video-modal {\n  position: fixed;\n  inset: 0;\n  z-index: 999999;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  padding: 24px;\n  background: rgba(0, 0, 0, 0.72);\n}\n\n.d2f-video-modal.is-open {\n  display: flex;\n}\n\n/* ================================\n   Modal Panel\n   ================================ */\n\n.d2f-video-modal__panel {\n  position: relative;\n  width: 100%;\n  max-width: 940px;\n  border-radius: 16px;\n  overflow: hidden;\n  background: #000;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);\n}\n\n.d2f-video-modal__ratio {\n  position: relative;\n  width: 100%;\n  padding-top: 56.25%;\n}\n\n.d2f-video-modal__ratio[data-video-has-ratio=\"1\"] {\n  padding-top: var(--d2f-video-pt);\n}\n\n.d2f-video-modal__inner {\n  position: absolute;\n  inset: 0;\n}\n\n/* ================================\n   Close Button\n   ================================ */\n\n.d2f-video-modal__close {\n  position: fixed;\n  top: 16px;\n  right: 16px;\n  z-index: 1000000;\n  width: 44px;\n  height: 44px;\n  border: 0;\n  border-radius: 999px;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.6);\n  color: #fff;\n  display: none;\n  place-items: center;\n}\n\n.d2f-video-modal.is-open .d2f-video-modal__close {\n  display: grid;\n}\n\n.d2f-video-modal__close:hover {\n  background: rgba(0, 0, 0, 0.8);\n}\n\n/* ================================\n   Modal Media\n   ================================ */\n\n.d2f-video-modal iframe,\n.d2f-video-modal video {\n  width: 100%;\n  height: 100%;\n  display: block;\n  border: 0;\n}\n\n.d2f-video-modal .plyr {\n  height: 100%;\n}\n";
    document.head.appendChild(style);
  }
})();

"use strict";var d2f_video=(()=>{var h=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var K=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},B=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of U(t))!G.call(e,i)&&i!==n&&h(e,i,{get:()=>t[i],enumerable:!(o=D(t,i))||o.enumerable});return e};var F=e=>B(h({},"__esModule",{value:!0}),e);var te={};K(te,{getYouTubeId:()=>A,init:()=>P,isVideoFileUrl:()=>O,isYouTubeUrl:()=>w,parseRatioToPaddingTop:()=>k,pickBestYouTubePoster:()=>Y});var u={ROOT:"data-vdo",SRC:"data-vdo-src",MODE:"data-vdo-mode",AUTOPLAY:"data-vdo-autoplay",MUTED:"data-vdo-muted",RATIO:"data-vdo-ratio",POSTER:"data-vdo-poster",PLAY_TOGGLE:"data-vdo-play-toggle",HAS_RATIO:"data-vdo-has-ratio"},m={ROOT:"data-video",SRC:"data-video-src",MODE:"data-video-mode",AUTOPLAY:"data-video-autoplay",MUTED:"data-video-muted",RATIO:"data-video-ratio",POSTER:"data-video-poster",PLAY_TOGGLE:"data-video-play-toggle",HAS_RATIO:"data-video-has-ratio"};function v(e,t,n){return e.getAttribute(t)??e.getAttribute(n)}var V="https://www.youtube-nocookie.com",r="d2f-video",p=null,L=null;function w(e){return/youtu\.be|youtube\.com/i.test(e||"")}function O(e){return/\.(mp4|webm|m4v)(\?.*)?$/i.test(e||"")}function A(e){if(!e)return null;let t=e.replace(/watch\?v=([^&?]+)\?/i,"watch?v=$1&"),n=[/(?:youtube\.com\/watch\?v=)([^&]+)/i,/(?:youtu\.be\/)([^?&]+)/i,/(?:youtube\.com\/embed\/)([^?&]+)/i,/[?&]v=([^&]+)/i];for(let o of n){let i=t.match(o);if(i&&i[1])return i[1]}return null}function k(e){if(!e||!e.includes("/"))return null;let[t,n]=e.split("/").map(o=>parseFloat(String(o).trim()));return!t||!n?null:`${n/t*100}%`}function N(e,t=2500){return new Promise(n=>{let o=new Image,i=!1,l=E=>{i||(i=!0,o.onload=null,o.onerror=null,n(E))},s=setTimeout(()=>l(!1),t);o.onload=()=>{clearTimeout(s),l(!0)},o.onerror=()=>{clearTimeout(s),l(!1)},o.src=e})}async function Y(e){let t=[`https://i.ytimg.com/vi/${e}/maxresdefault.jpg`,`https://i.ytimg.com/vi/${e}/sddefault.jpg`,`https://i.ytimg.com/vi/${e}/hqdefault.jpg`];for(let n of t)if(await N(n))return n;return t[t.length-1]}async function j(e,t){let n=v(e,m.POSTER,u.POSTER);if(n){e.style.backgroundImage=`url("${n}")`;return}if(!w(t))return;let o=A(t);if(!o||e.style.backgroundImage&&e.style.backgroundImage!=="none")return;let i=await Y(o);e.style.backgroundImage=`url("${i}")`}function b(e,t){e.querySelectorAll(`[${u.PLAY_TOGGLE}], [${m.PLAY_TOGGLE}]`).forEach(o=>{o.style.opacity=t?"0":"1",o.style.pointerEvents=t?"none":"",o.style.transition="opacity 0.25s ease"})}function T(){let e=document.querySelector(`.${r}-modal`);return e||(e=document.createElement("div"),e.className=`${r}-modal`,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Video dialog"),e.innerHTML=`
    <button class="${r}-modal__close" type="button" aria-label="Close video">
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.31 6.3-6.31z"/>
      </svg>
    </button>
    <div class="${r}-modal__panel" role="document">
      <div class="${r}-modal__ratio">
        <div class="${r}-modal__inner"></div>
      </div>
    </div>
  `,document.body.appendChild(e),e)}function M(e){if(p){try{p.destroy()}catch{}p=null}e&&(e.innerHTML="")}function _(){let e=document.querySelector(`.${r}-modal`);if(!e)return;let t=e.querySelector(`.${r}-modal__inner`);M(t),e.classList.remove("is-open"),document.documentElement.style.overflow="",document.body.style.overflow="",e._onKey&&(document.removeEventListener("keydown",e._onKey),e._onKey=void 0),L&&typeof L.focus=="function"&&L.focus()}function S(){let e=T();e.classList.add("is-open"),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",e.querySelector(`.${r}-modal__close`)?.focus();let n=o=>{o.key==="Escape"&&_()};e._onKey=n,document.addEventListener("keydown",n)}function W(){let e=T(),t=e.querySelector(`.${r}-modal__panel`),n=e.querySelector(`.${r}-modal__close`);n?.addEventListener("click",_),e.addEventListener("click",o=>{t&&!t.contains(o.target)&&o.target!==n&&_()})}function z(e,t){let n=A(e);if(!n)return null;let o=new URLSearchParams({autoplay:t?"1":"0",rel:"0",playsinline:"1",modestbranding:"1"}),i=document.createElement("iframe");return i.src=`${V}/embed/${n}?${o.toString()}`,i.setAttribute("title","YouTube video"),i.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),i.setAttribute("allowfullscreen","true"),i.setAttribute("frameborder","0"),i.loading="lazy",i}function R(e,t,n){let o=document.createElement("video");o.setAttribute("playsinline",""),o.setAttribute("controls",""),o.autoplay=t,o.muted=n;let i=document.createElement("source");return i.src=e,i.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",o.appendChild(i),o}function X(e){let t=A(e);if(!t)return null;let n=new URLSearchParams({autoplay:"1",mute:"1",loop:"1",playlist:t,controls:"0",modestbranding:"1",playsinline:"1",rel:"0",showinfo:"0",disablekb:"1"}),o=document.createElement("iframe");return o.src=`${V}/embed/${t}?${n.toString()}`,o.setAttribute("title","Video preview"),o.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),o.setAttribute("allowfullscreen","true"),o.setAttribute("frameborder","0"),o.loading="eager",o.style.pointerEvents="none",o}function J(e){let t=document.createElement("video");t.setAttribute("playsinline",""),t.autoplay=!0,t.muted=!0,t.loop=!0,t.style.pointerEvents="none";let n=document.createElement("source");return n.src=e,n.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",t.appendChild(n),t}function C(e){try{window.Plyr&&(p=new window.Plyr(e,{controls:["play-large","play","progress","current-time","mute","volume","settings","fullscreen"]}))}catch{p=null}}function Q(e,t,n){if(w(t)){let o=X(t);o&&(n.appendChild(o),b(e,!0))}else if(O(t)){let o=J(t);n.appendChild(o),b(e,!0),setTimeout(()=>{try{o.play()}catch{}},0)}}function Z(e,t,n){let o=new IntersectionObserver(i=>{for(let l of i)if(l.isIntersecting){Q(e,t,n),o.disconnect();return}},{rootMargin:"-5% 0px 0px 0px",threshold:0});o.observe(e)}function ee(e){if(e._d2fVideoInit)return;e._d2fVideoInit=!0;let t=v(e,m.SRC,u.SRC);if(!t)return;let o=e.hasAttribute(u.ROOT)?u:m,i=v(e,m.RATIO,u.RATIO),l=k(i);if(l&&(e.style.setProperty("--d2f-video-pt",l),e.setAttribute(o.HAS_RATIO,"1")),j(e,t),!e.querySelector(`.${r}__inner`)){let d=document.createElement("div");d.className=`${r}__inner`,e.appendChild(d)}let s=(v(e,m.MODE,u.MODE)||"modal").toLowerCase(),E=(v(e,m.AUTOPLAY,u.AUTOPLAY)||"1")==="1",$=(v(e,m.MUTED,u.MUTED)||"0")==="1";e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button"),e.hasAttribute("aria-label")||e.setAttribute("aria-label",s==="preview"?"Play full video":"Play video");let g=e.querySelector(`.${r}__inner`);s==="preview"&&Z(e,t,g);let H=d=>{d&&(d.preventDefault(),d.stopPropagation()),L=e,s!=="preview"&&(g.innerHTML="");let I=s==="preview"?!0:E,q=s==="preview"?!1:$;if(w(t)){let a=z(t,I);if(!a)return;if(s==="inline"){g.appendChild(a),b(e,!0);try{window.Plyr&&(p=new window.Plyr(a))}catch{}}else{let y=T(),f=y.querySelector(`.${r}-modal__inner`);M(f);let c=y.querySelector(`.${r}-modal__ratio`);c&&(l?(c.style.setProperty("--d2f-video-pt",l),c.setAttribute("data-video-has-ratio","1")):(c.style.removeProperty("--d2f-video-pt"),c.removeAttribute("data-video-has-ratio"))),f?.appendChild(a);try{window.Plyr&&(p=new window.Plyr(a))}catch{}S()}return}if(O(t))if(s==="inline"){let a=R(t,E,$);g.appendChild(a),b(e,!0),a.addEventListener("ended",()=>b(e,!1),{once:!0}),C(a),setTimeout(()=>{try{a.play()}catch{}},0)}else{let a=T(),y=a.querySelector(`.${r}-modal__inner`);M(y);let f=a.querySelector(`.${r}-modal__ratio`);f&&(l?(f.style.setProperty("--d2f-video-pt",l),f.setAttribute("data-video-has-ratio","1")):(f.style.removeProperty("--d2f-video-pt"),f.removeAttribute("data-video-has-ratio")));let c=R(t,I,q);y?.appendChild(c),C(c),setTimeout(()=>{try{c.play()}catch{}},0),S()}};e.addEventListener("click",H),e.addEventListener("keydown",d=>{(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),H(d))})}function P(){T(),W(),document.querySelectorAll(`[${u.ROOT}], [${m.ROOT}]`).forEach(ee)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",P):P();return F(te);})();
