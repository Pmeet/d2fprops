"use strict";var d2f_video=(()=>{var _=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var K=(e,t)=>{for(var i in t)_(e,i,{get:t[i],enumerable:!0})},B=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of F(t))!G.call(e,n)&&n!==i&&_(e,n,{get:()=>t[n],enumerable:!(o=U(t,n))||o.enumerable});return e};var N=e=>B(_({},"__esModule",{value:!0}),e);var ie={};K(ie,{getYouTubeId:()=>A,init:()=>H,isVideoFileUrl:()=>$,isYouTubeUrl:()=>L,parseRatioToPaddingTop:()=>k,pickBestYouTubePoster:()=>Y});var d={ROOT:"data-vdo",SRC:"data-vdo-src",MODE:"data-vdo-mode",AUTOPLAY:"data-vdo-autoplay",MUTED:"data-vdo-muted",RATIO:"data-vdo-ratio",POSTER:"data-vdo-poster",PLAY_TOGGLE:"data-vdo-play-toggle",HAS_RATIO:"data-vdo-has-ratio"},c={ROOT:"data-video",SRC:"data-video-src",MODE:"data-video-mode",AUTOPLAY:"data-video-autoplay",MUTED:"data-video-muted",RATIO:"data-video-ratio",POSTER:"data-video-poster",PLAY_TOGGLE:"data-video-play-toggle",HAS_RATIO:"data-video-has-ratio"};function y(e,t,i){return e.getAttribute(t)??e.getAttribute(i)}var O="https://www.youtube-nocookie.com",r="d2f-video",p=null,b=null;function L(e){return/youtu\.be|youtube\.com/i.test(e||"")}function $(e){return/\.(mp4|webm|m4v)(\?.*)?$/i.test(e||"")}function A(e){if(!e)return null;let t=e.replace(/watch\?v=([^&?]+)\?/i,"watch?v=$1&"),i=[/(?:youtube\.com\/watch\?v=)([^&]+)/i,/(?:youtu\.be\/)([^?&]+)/i,/(?:youtube\.com\/embed\/)([^?&]+)/i,/[?&]v=([^&]+)/i];for(let o of i){let n=t.match(o);if(n&&n[1])return n[1]}return null}function k(e){if(!e||!e.includes("/"))return null;let[t,i]=e.split("/").map(o=>parseFloat(String(o).trim()));return!t||!i?null:`${i/t*100}%`}function j(e,t=2500){return new Promise(i=>{let o=new Image,n=!1,u=M=>{n||(n=!0,o.onload=null,o.onerror=null,i(M))},E=setTimeout(()=>u(!1),t);o.onload=()=>{clearTimeout(E),u(!0)},o.onerror=()=>{clearTimeout(E),u(!1)},o.src=e})}async function Y(e){let t=[`https://i.ytimg.com/vi/${e}/maxresdefault.jpg`,`https://i.ytimg.com/vi/${e}/sddefault.jpg`,`https://i.ytimg.com/vi/${e}/hqdefault.jpg`];for(let i of t)if(await j(i))return i;return t[t.length-1]}async function W(e,t){let i=y(e,c.POSTER,d.POSTER);if(i){e.style.backgroundImage=`url("${i}")`;return}if(!L(t))return;let o=A(t);if(!o||e.style.backgroundImage&&e.style.backgroundImage!=="none")return;let n=await Y(o);e.style.backgroundImage=`url("${n}")`}function T(e,t){e.querySelectorAll(`[${d.PLAY_TOGGLE}], [${c.PLAY_TOGGLE}]`).forEach(o=>{o.style.opacity=t?"0":"1",o.style.pointerEvents=t?"none":"",o.style.transition="opacity 0.25s ease"})}function g(){let e=document.querySelector(`.${r}-modal`);return e||(e=document.createElement("div"),e.className=`${r}-modal`,e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Video dialog"),e.innerHTML=`
    <button class="${r}-modal__close" type="button" aria-label="Close video">
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.31 6.3-6.31z"/>
      </svg>
    </button>
    <div class="${r}-modal__panel" role="document">
      <div class="${r}-modal__ratio">
        <div class="${r}-modal__inner"></div>
      </div>
    </div>
  `,document.body.appendChild(e),e)}function h(e){if(p){try{p.destroy()}catch{}p=null}e&&(e.innerHTML="")}function P(){let e=document.querySelector(`.${r}-modal`);if(!e)return;let t=e.querySelector(`.${r}-modal__inner`);h(t),e.classList.remove("is-open"),document.documentElement.style.overflow="",document.body.style.overflow="",e._onKey&&(document.removeEventListener("keydown",e._onKey),e._onKey=void 0),b&&(te(b),typeof b.focus=="function"&&b.focus())}function R(){let e=g();e.classList.add("is-open"),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",e.querySelector(`.${r}-modal__close`)?.focus();let i=o=>{o.key==="Escape"&&P()};e._onKey=i,document.addEventListener("keydown",i)}function z(){let e=g(),t=e.querySelector(`.${r}-modal__panel`),i=e.querySelector(`.${r}-modal__close`);i?.addEventListener("click",P),e.addEventListener("click",o=>{t&&!t.contains(o.target)&&o.target!==i&&P()})}function J(e,t){let i=A(e);if(!i)return null;let o=new URLSearchParams({autoplay:t?"1":"0",rel:"0",playsinline:"1",modestbranding:"1"}),n=document.createElement("iframe");return n.src=`${O}/embed/${i}?${o.toString()}`,n.setAttribute("title","YouTube video"),n.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("frameborder","0"),n.loading="lazy",n}function V(e,t,i){let o=document.createElement("video");o.setAttribute("playsinline",""),o.setAttribute("controls",""),o.autoplay=t,o.muted=i;let n=document.createElement("source");return n.src=e,n.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",o.appendChild(n),o}function X(e){let t=A(e);if(!t)return null;let i=typeof window<"u"?window.location.origin:"",o=new URLSearchParams({autoplay:"1",mute:"1",loop:"1",playlist:t,controls:"0",modestbranding:"1",playsinline:"1",rel:"0",showinfo:"0",disablekb:"1",enablejsapi:"1",origin:i,iv_load_policy:"3",fs:"0",cc_load_policy:"0"}),n=document.createElement("iframe");return n.src=`${O}/embed/${t}?${o.toString()}`,n.setAttribute("title","Video preview"),n.setAttribute("allow","autoplay; fullscreen; picture-in-picture"),n.setAttribute("allowfullscreen","true"),n.setAttribute("frameborder","0"),n.loading="eager",n.style.pointerEvents="none",n}function Q(e){let t=document.createElement("video");t.setAttribute("playsinline",""),t.autoplay=!0,t.muted=!0,t.loop=!0,t.style.pointerEvents="none";let i=document.createElement("source");return i.src=e,i.type=/\.webm(\?.*)?$/i.test(e)?"video/webm":"video/mp4",t.appendChild(i),t}function C(e){try{window.Plyr&&(p=new window.Plyr(e,{controls:["play-large","play","progress","current-time","mute","volume","settings","fullscreen"]}))}catch{p=null}}function Z(e,t,i){if(L(t)){let o=X(t);o&&(i.appendChild(o),e._d2fPreviewEl=o,T(e,!0))}else if($(t)){let o=Q(t);i.appendChild(o),e._d2fPreviewEl=o,T(e,!0),setTimeout(()=>{try{o.play()}catch{}},0)}}function x(e,t){e.contentWindow&&e.contentWindow.postMessage(JSON.stringify({event:"command",func:t,args:""}),O)}function ee(e){let t=e._d2fPreviewEl;t&&(t instanceof HTMLVideoElement?t.pause():t instanceof HTMLIFrameElement&&x(t,"pauseVideo"))}function te(e){let t=e._d2fPreviewEl;if(t)if(t instanceof HTMLVideoElement)try{t.play()}catch{}else t instanceof HTMLIFrameElement&&x(t,"playVideo")}function oe(e,t,i){let o=new IntersectionObserver(n=>{for(let u of n)if(u.isIntersecting){Z(e,t,i),o.disconnect();return}},{rootMargin:"0px 0px 200px 0px",threshold:0});o.observe(e)}function ne(e){if(e._d2fVideoInit)return;e._d2fVideoInit=!0;let t=y(e,c.SRC,d.SRC);if(!t)return;let o=e.hasAttribute(d.ROOT)?d:c,n=(y(e,c.MODE,d.MODE)||"modal").toLowerCase(),u=(y(e,c.AUTOPLAY,d.AUTOPLAY)||"1")==="1",E=(y(e,c.MUTED,d.MUTED)||"0")==="1",M=y(e,c.RATIO,d.RATIO),v=k(M);if(v&&(e.style.setProperty("--d2f-video-pt",v),e.setAttribute(o.HAS_RATIO,"1")),n!=="preview"&&W(e,t),!e.querySelector(`.${r}__inner`)){let l=document.createElement("div");l.className=`${r}__inner`,e.appendChild(l)}e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button"),e.hasAttribute("aria-label")||e.setAttribute("aria-label",n==="preview"?"Play full video":"Play video");let w=e.querySelector(`.${r}__inner`);n==="preview"&&oe(e,t,w);let I=l=>{l&&(l.preventDefault(),l.stopPropagation()),b=e,n==="preview"?ee(e):w.innerHTML="";let S=n==="preview"?!0:u,q=n==="preview"?!1:E;if(L(t)){let a=J(t,S);if(!a)return;if(n==="inline"){w.appendChild(a),T(e,!0);try{window.Plyr&&(p=new window.Plyr(a))}catch{}}else{let f=g(),m=f.querySelector(`.${r}-modal__inner`);h(m);let s=f.querySelector(`.${r}-modal__ratio`);s&&(v?(s.style.setProperty("--d2f-video-pt",v),s.setAttribute("data-video-has-ratio","1")):(s.style.removeProperty("--d2f-video-pt"),s.removeAttribute("data-video-has-ratio"))),m?.appendChild(a);try{window.Plyr&&(p=new window.Plyr(a))}catch{}R()}return}if($(t))if(n==="inline"){let a=V(t,u,E);w.appendChild(a),T(e,!0),a.addEventListener("ended",()=>T(e,!1),{once:!0}),C(a),setTimeout(()=>{try{a.play()}catch{}},0)}else{let a=g(),f=a.querySelector(`.${r}-modal__inner`);h(f);let m=a.querySelector(`.${r}-modal__ratio`);m&&(v?(m.style.setProperty("--d2f-video-pt",v),m.setAttribute("data-video-has-ratio","1")):(m.style.removeProperty("--d2f-video-pt"),m.removeAttribute("data-video-has-ratio")));let s=V(t,S,q);f?.appendChild(s),C(s),setTimeout(()=>{try{s.play()}catch{}},0),R()}};e.addEventListener("click",I),e.addEventListener("keydown",l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),I(l))})}function H(){g(),z(),document.querySelectorAll(`[${d.ROOT}], [${c.ROOT}]`).forEach(ne)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",H):H();return N(ie);})();
