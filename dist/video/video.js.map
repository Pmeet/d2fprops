{
  "version": 3,
  "sources": ["../../src/props/video/index.ts"],
  "sourcesContent": ["/**\n * d2fprops / video\n * Attribute-based video player for Webflow\n *\n * Supports two attribute naming conventions:\n * - Legacy: data-vdo, data-vdo-src, etc. (for existing implementations)\n * - New: data-video, data-video-src, etc.\n *\n * @example\n * <div data-vdo data-vdo-src=\"https://youtube.com/watch?v=VIDEO_ID\"></div>\n * <div data-video data-video-src=\"https://youtube.com/watch?v=VIDEO_ID\"></div>\n */\n\n// ============================================================\n// CONSTANTS\n// ============================================================\n\n// Legacy attributes (data-vdo-*) - maintained for backwards compatibility\nconst ATTR_LEGACY = {\n  ROOT: \"data-vdo\",\n  SRC: \"data-vdo-src\",\n  MODE: \"data-vdo-mode\",\n  AUTOPLAY: \"data-vdo-autoplay\",\n  MUTED: \"data-vdo-muted\",\n  RATIO: \"data-vdo-ratio\",\n  POSTER: \"data-vdo-poster\",\n  PLAY_TOGGLE: \"data-vdo-play-toggle\",\n  HAS_RATIO: \"data-vdo-has-ratio\",\n} as const;\n\n// New attributes (data-video-*)\nconst ATTR_NEW = {\n  ROOT: \"data-video\",\n  SRC: \"data-video-src\",\n  MODE: \"data-video-mode\",\n  AUTOPLAY: \"data-video-autoplay\",\n  MUTED: \"data-video-muted\",\n  RATIO: \"data-video-ratio\",\n  POSTER: \"data-video-poster\",\n  PLAY_TOGGLE: \"data-video-play-toggle\",\n  HAS_RATIO: \"data-video-has-ratio\",\n} as const;\n\n/**\n * Get attribute value with fallback to legacy naming\n */\nfunction getAttr(el: HTMLElement, newAttr: string, legacyAttr: string): string | null {\n  return el.getAttribute(newAttr) ?? el.getAttribute(legacyAttr);\n}\n\nconst YT_PRIVACY_DOMAIN = \"https://www.youtube-nocookie.com\";\nconst CSS_PREFIX = \"d2f-video\";\n\n// ============================================================\n// TYPE DEFINITIONS\n// ============================================================\n\ninterface VideoElement extends HTMLElement {\n  _d2fVideoInit?: boolean;\n}\n\ninterface VideoModal extends HTMLElement {\n  _onKey?: (ev: KeyboardEvent) => void;\n}\n\ndeclare global {\n  interface Window {\n    Plyr?: new (element: HTMLElement | HTMLIFrameElement, options?: object) => PlyrInstance;\n  }\n}\n\ninterface PlyrInstance {\n  destroy(): void;\n}\n\n// ============================================================\n// STATE\n// ============================================================\n\nlet activePlayer: PlyrInstance | null = null;\nlet lastActiveEl: HTMLElement | null = null;\n\n// ============================================================\n// URL HELPERS\n// ============================================================\n\n/**\n * Check if URL is a YouTube link\n */\nexport function isYouTubeUrl(url: string | null): boolean {\n  return /youtu\\.be|youtube\\.com/i.test(url || \"\");\n}\n\n/**\n * Check if URL is a direct video file\n */\nexport function isVideoFileUrl(url: string | null): boolean {\n  return /\\.(mp4|webm|m4v)(\\?.*)?$/i.test(url || \"\");\n}\n\n/**\n * Extract YouTube video ID from various URL formats\n */\nexport function getYouTubeId(url: string | null): string | null {\n  if (!url) return null;\n\n  // Clean up malformed URLs\n  const cleaned = url.replace(/watch\\?v=([^&?]+)\\?/i, \"watch?v=$1&\");\n\n  const patterns = [\n    /(?:youtube\\.com\\/watch\\?v=)([^&]+)/i,\n    /(?:youtu\\.be\\/)([^?&]+)/i,\n    /(?:youtube\\.com\\/embed\\/)([^?&]+)/i,\n    /[?&]v=([^&]+)/i,\n  ];\n\n  for (const re of patterns) {\n    const m = cleaned.match(re);\n    if (m && m[1]) return m[1];\n  }\n\n  return null;\n}\n\n// ============================================================\n// RATIO HELPERS\n// ============================================================\n\n/**\n * Convert ratio string (e.g., \"16/9\") to CSS padding-top percentage\n */\nexport function parseRatioToPaddingTop(ratioStr: string | null): string | null {\n  if (!ratioStr || !ratioStr.includes(\"/\")) return null;\n\n  const [w, h] = ratioStr.split(\"/\").map((n) => parseFloat(String(n).trim()));\n  if (!w || !h) return null;\n\n  return `${(h / w) * 100}%`;\n}\n\n// ============================================================\n// POSTER HELPERS\n// ============================================================\n\n/**\n * Test if an image URL can be loaded\n */\nfunction canLoadImage(url: string, timeoutMs = 2500): Promise<boolean> {\n  return new Promise((resolve) => {\n    const img = new Image();\n    let done = false;\n\n    const finish = (ok: boolean) => {\n      if (done) return;\n      done = true;\n      img.onload = null;\n      img.onerror = null;\n      resolve(ok);\n    };\n\n    const t = setTimeout(() => finish(false), timeoutMs);\n    img.onload = () => {\n      clearTimeout(t);\n      finish(true);\n    };\n    img.onerror = () => {\n      clearTimeout(t);\n      finish(false);\n    };\n    img.src = url;\n  });\n}\n\n/**\n * Find the best available YouTube thumbnail\n */\nexport async function pickBestYouTubePoster(ytId: string): Promise<string> {\n  const candidates = [\n    `https://i.ytimg.com/vi/${ytId}/maxresdefault.jpg`,\n    `https://i.ytimg.com/vi/${ytId}/sddefault.jpg`,\n    `https://i.ytimg.com/vi/${ytId}/hqdefault.jpg`,\n  ];\n\n  for (const url of candidates) {\n    const ok = await canLoadImage(url);\n    if (ok) return url;\n  }\n\n  return candidates[candidates.length - 1];\n}\n\n/**\n * Set poster image on element if not already set\n */\nasync function setPosterIfNeeded(el: HTMLElement, src: string): Promise<void> {\n  // Explicit poster attribute takes priority (check both naming conventions)\n  const custom = getAttr(el, ATTR_NEW.POSTER, ATTR_LEGACY.POSTER);\n  if (custom) {\n    el.style.backgroundImage = `url(\"${custom}\")`;\n    return;\n  }\n\n  if (!isYouTubeUrl(src)) return;\n\n  const id = getYouTubeId(src);\n  if (!id) return;\n\n  // Don't override existing inline styles\n  if (el.style.backgroundImage && el.style.backgroundImage !== \"none\") return;\n\n  const best = await pickBestYouTubePoster(id);\n  el.style.backgroundImage = `url(\"${best}\")`;\n}\n\n// ============================================================\n// UI HELPERS\n// ============================================================\n\n/**\n * Toggle visibility of play overlay elements\n */\nfunction togglePlayOverlay(rootEl: HTMLElement, isPlaying: boolean): void {\n  // Check both legacy and new attribute names\n  const toggles = rootEl.querySelectorAll<HTMLElement>(\n    `[${ATTR_LEGACY.PLAY_TOGGLE}], [${ATTR_NEW.PLAY_TOGGLE}]`\n  );\n\n  toggles.forEach((el) => {\n    el.style.opacity = isPlaying ? \"0\" : \"1\";\n    el.style.pointerEvents = isPlaying ? \"none\" : \"\";\n    el.style.transition = \"opacity 0.25s ease\";\n  });\n}\n\n// ============================================================\n// MODAL\n// ============================================================\n\n/**\n * Get or create the modal element\n */\nfunction ensureModal(): VideoModal {\n  let modal = document.querySelector<VideoModal>(`.${CSS_PREFIX}-modal`);\n  if (modal) return modal;\n\n  modal = document.createElement(\"div\") as VideoModal;\n  modal.className = `${CSS_PREFIX}-modal`;\n  modal.setAttribute(\"role\", \"dialog\");\n  modal.setAttribute(\"aria-modal\", \"true\");\n  modal.setAttribute(\"aria-label\", \"Video dialog\");\n\n  modal.innerHTML = `\n    <button class=\"${CSS_PREFIX}-modal__close\" type=\"button\" aria-label=\"Close video\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n        <path fill=\"currentColor\" d=\"M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.31 6.3-6.31z\"/>\n      </svg>\n    </button>\n    <div class=\"${CSS_PREFIX}-modal__panel\" role=\"document\">\n      <div class=\"${CSS_PREFIX}-modal__ratio\">\n        <div class=\"${CSS_PREFIX}-modal__inner\"></div>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(modal);\n  return modal;\n}\n\n/**\n * Destroy active player and clear container\n */\nfunction destroyPlayerAndClear(container: HTMLElement | null): void {\n  if (activePlayer) {\n    try {\n      activePlayer.destroy();\n    } catch (e) {\n      // Ignore destroy errors\n    }\n    activePlayer = null;\n  }\n  if (container) container.innerHTML = \"\";\n}\n\n/**\n * Close the video modal\n */\nfunction closeModal(): void {\n  const modal = document.querySelector<VideoModal>(`.${CSS_PREFIX}-modal`);\n  if (!modal) return;\n\n  const inner = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__inner`);\n  destroyPlayerAndClear(inner);\n\n  modal.classList.remove(\"is-open\");\n  document.documentElement.style.overflow = \"\";\n  document.body.style.overflow = \"\";\n\n  if (modal._onKey) {\n    document.removeEventListener(\"keydown\", modal._onKey);\n    modal._onKey = undefined;\n  }\n\n  if (lastActiveEl && typeof lastActiveEl.focus === \"function\") {\n    lastActiveEl.focus();\n  }\n}\n\n/**\n * Open the video modal\n */\nfunction openModal(): void {\n  const modal = ensureModal();\n  modal.classList.add(\"is-open\");\n  document.documentElement.style.overflow = \"hidden\";\n  document.body.style.overflow = \"hidden\";\n\n  const closeBtn = modal.querySelector<HTMLButtonElement>(`.${CSS_PREFIX}-modal__close`);\n  closeBtn?.focus();\n\n  const onKey = (ev: KeyboardEvent) => {\n    if (ev.key === \"Escape\") closeModal();\n  };\n  modal._onKey = onKey;\n  document.addEventListener(\"keydown\", onKey);\n}\n\n/**\n * Wire up modal close handlers\n */\nfunction wireModalClose(): void {\n  const modal = ensureModal();\n  const panel = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__panel`);\n  const closeBtn = modal.querySelector<HTMLButtonElement>(`.${CSS_PREFIX}-modal__close`);\n\n  closeBtn?.addEventListener(\"click\", closeModal);\n\n  modal.addEventListener(\"click\", (e) => {\n    if (panel && !panel.contains(e.target as Node) && e.target !== closeBtn) {\n      closeModal();\n    }\n  });\n}\n\n// ============================================================\n// PLAYER BUILDERS\n// ============================================================\n\n/**\n * Create a YouTube iframe embed\n */\nfunction buildYouTubeIframe(src: string, autoplay: boolean): HTMLIFrameElement | null {\n  const id = getYouTubeId(src);\n  if (!id) return null;\n\n  const params = new URLSearchParams({\n    autoplay: autoplay ? \"1\" : \"0\",\n    rel: \"0\",\n    playsinline: \"1\",\n    modestbranding: \"1\",\n  });\n\n  const iframe = document.createElement(\"iframe\");\n  iframe.src = `${YT_PRIVACY_DOMAIN}/embed/${id}?${params.toString()}`;\n  iframe.setAttribute(\"title\", \"YouTube video\");\n  iframe.setAttribute(\"allow\", \"autoplay; fullscreen; picture-in-picture\");\n  iframe.setAttribute(\"allowfullscreen\", \"true\");\n  iframe.setAttribute(\"frameborder\", \"0\");\n  iframe.loading = \"lazy\";\n\n  return iframe;\n}\n\n/**\n * Create an HTML5 video element\n */\nfunction buildHtml5Video(src: string, autoplay: boolean, muted: boolean): HTMLVideoElement {\n  const video = document.createElement(\"video\");\n  video.setAttribute(\"playsinline\", \"\");\n  video.setAttribute(\"controls\", \"\");\n  video.autoplay = autoplay;\n  video.muted = muted;\n\n  const source = document.createElement(\"source\");\n  source.src = src;\n  source.type = /\\.webm(\\?.*)?$/i.test(src) ? \"video/webm\" : \"video/mp4\";\n  video.appendChild(source);\n\n  return video;\n}\n\n/**\n * Create a YouTube iframe for muted, looping preview playback (no controls)\n */\nfunction buildPreviewYouTubeIframe(src: string): HTMLIFrameElement | null {\n  const id = getYouTubeId(src);\n  if (!id) return null;\n\n  const params = new URLSearchParams({\n    autoplay: \"1\",\n    mute: \"1\",\n    loop: \"1\",\n    playlist: id,\n    controls: \"0\",\n    modestbranding: \"1\",\n    playsinline: \"1\",\n    rel: \"0\",\n    showinfo: \"0\",\n    disablekb: \"1\",\n  });\n\n  const iframe = document.createElement(\"iframe\");\n  iframe.src = `${YT_PRIVACY_DOMAIN}/embed/${id}?${params.toString()}`;\n  iframe.setAttribute(\"title\", \"Video preview\");\n  iframe.setAttribute(\"allow\", \"autoplay; fullscreen; picture-in-picture\");\n  iframe.setAttribute(\"allowfullscreen\", \"true\");\n  iframe.setAttribute(\"frameborder\", \"0\");\n  iframe.loading = \"eager\";\n  iframe.style.pointerEvents = \"none\";\n\n  return iframe;\n}\n\n/**\n * Create an HTML5 video element for muted, looping preview playback (no controls)\n */\nfunction buildPreviewHtml5Video(src: string): HTMLVideoElement {\n  const video = document.createElement(\"video\");\n  video.setAttribute(\"playsinline\", \"\");\n  video.autoplay = true;\n  video.muted = true;\n  video.loop = true;\n  video.style.pointerEvents = \"none\";\n\n  const source = document.createElement(\"source\");\n  source.src = src;\n  source.type = /\\.webm(\\?.*)?$/i.test(src) ? \"video/webm\" : \"video/mp4\";\n  video.appendChild(source);\n\n  return video;\n}\n\n/**\n * Enhance a video/iframe with Plyr if available\n */\nfunction enhanceWithPlyr(mediaEl: HTMLVideoElement | HTMLIFrameElement): void {\n  try {\n    if (window.Plyr) {\n      activePlayer = new window.Plyr(mediaEl, {\n        controls: [\n          \"play-large\",\n          \"play\",\n          \"progress\",\n          \"current-time\",\n          \"mute\",\n          \"volume\",\n          \"settings\",\n          \"fullscreen\",\n        ],\n      });\n    }\n  } catch (e) {\n    activePlayer = null;\n  }\n}\n\n// ============================================================\n// PREVIEW MODE\n// ============================================================\n\n/**\n * Mount and start a muted, looping preview player inside the element\n */\nfunction startPreview(el: HTMLElement, src: string, inner: HTMLElement): void {\n  if (isYouTubeUrl(src)) {\n    const iframe = buildPreviewYouTubeIframe(src);\n    if (iframe) {\n      inner.appendChild(iframe);\n      togglePlayOverlay(el, true);\n    }\n  } else if (isVideoFileUrl(src)) {\n    const vid = buildPreviewHtml5Video(src);\n    inner.appendChild(vid);\n    togglePlayOverlay(el, true);\n    setTimeout(() => {\n      try { vid.play(); } catch (_e) { /* autoplay may be blocked */ }\n    }, 0);\n  }\n}\n\n/**\n * Observe element visibility and start preview when ~5% visible from viewport top\n */\nfunction observePreview(el: HTMLElement, src: string, inner: HTMLElement): void {\n  const observer = new IntersectionObserver(\n    (entries) => {\n      for (const entry of entries) {\n        if (entry.isIntersecting) {\n          startPreview(el, src, inner);\n          observer.disconnect();\n          return;\n        }\n      }\n    },\n    { rootMargin: \"-5% 0px 0px 0px\", threshold: 0 }\n  );\n  observer.observe(el);\n}\n\n// ============================================================\n// INITIALIZATION\n// ============================================================\n\n/**\n * Initialize a single video element\n */\nfunction initOne(el: VideoElement): void {\n  // Prevent double initialization\n  if (el._d2fVideoInit) return;\n  el._d2fVideoInit = true;\n\n  // Get src with fallback to legacy attribute\n  const src = getAttr(el, ATTR_NEW.SRC, ATTR_LEGACY.SRC);\n  if (!src) return;\n\n  // Determine which attribute set this element uses (for setting attributes)\n  const isLegacy = el.hasAttribute(ATTR_LEGACY.ROOT);\n  const ATTR = isLegacy ? ATTR_LEGACY : ATTR_NEW;\n\n  // Set up aspect ratio\n  const ratioStr = getAttr(el, ATTR_NEW.RATIO, ATTR_LEGACY.RATIO);\n  const pt = parseRatioToPaddingTop(ratioStr);\n  if (pt) {\n    el.style.setProperty(\"--d2f-video-pt\", pt);\n    el.setAttribute(ATTR.HAS_RATIO, \"1\");\n  }\n\n  // Set poster (async for YouTube)\n  setPosterIfNeeded(el, src);\n\n  // Create inner mount (use consistent class name internally)\n  if (!el.querySelector(`.${CSS_PREFIX}__inner`)) {\n    const inner = document.createElement(\"div\");\n    inner.className = `${CSS_PREFIX}__inner`;\n    el.appendChild(inner);\n  }\n\n  // Parse options with fallback to legacy attributes\n  const mode = (getAttr(el, ATTR_NEW.MODE, ATTR_LEGACY.MODE) || \"modal\").toLowerCase();\n  const autoplay = (getAttr(el, ATTR_NEW.AUTOPLAY, ATTR_LEGACY.AUTOPLAY) || \"1\") === \"1\";\n  const muted = (getAttr(el, ATTR_NEW.MUTED, ATTR_LEGACY.MUTED) || \"0\") === \"1\";\n\n  // Accessibility\n  if (!el.hasAttribute(\"tabindex\")) el.setAttribute(\"tabindex\", \"0\");\n  if (!el.hasAttribute(\"role\")) el.setAttribute(\"role\", \"button\");\n  if (!el.hasAttribute(\"aria-label\")) {\n    el.setAttribute(\"aria-label\", mode === \"preview\" ? \"Play full video\" : \"Play video\");\n  }\n\n  const inner = el.querySelector<HTMLElement>(`.${CSS_PREFIX}__inner`)!;\n\n  // Preview mode: set up IntersectionObserver to start preview when scrolled into view\n  if (mode === \"preview\") {\n    observePreview(el, src, inner);\n  }\n\n  /**\n   * Play handler\n   */\n  const play = (e?: Event) => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    lastActiveEl = el;\n\n    // In preview mode, keep the inline preview playing (don't clear inner)\n    if (mode !== \"preview\") {\n      inner.innerHTML = \"\";\n    }\n\n    // For preview mode, modal player always starts unmuted with autoplay from 0:00\n    const modalAutoplay = mode === \"preview\" ? true : autoplay;\n    const modalMuted = mode === \"preview\" ? false : muted;\n\n    // YouTube video\n    if (isYouTubeUrl(src)) {\n      const iframe = buildYouTubeIframe(src, modalAutoplay);\n      if (!iframe) return;\n\n      if (mode === \"inline\") {\n        inner.appendChild(iframe);\n        togglePlayOverlay(el, true);\n        try {\n          if (window.Plyr) activePlayer = new window.Plyr(iframe);\n        } catch (e) {\n          // Ignore Plyr errors\n        }\n      } else {\n        const modal = ensureModal();\n        const modalInner = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__inner`);\n        destroyPlayerAndClear(modalInner);\n\n        const modalRatio = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__ratio`);\n        if (modalRatio) {\n          if (pt) {\n            modalRatio.style.setProperty(\"--d2f-video-pt\", pt);\n            modalRatio.setAttribute(\"data-video-has-ratio\", \"1\");\n          } else {\n            modalRatio.style.removeProperty(\"--d2f-video-pt\");\n            modalRatio.removeAttribute(\"data-video-has-ratio\");\n          }\n        }\n\n        modalInner?.appendChild(iframe);\n        try {\n          if (window.Plyr) activePlayer = new window.Plyr(iframe);\n        } catch (e) {\n          // Ignore Plyr errors\n        }\n        openModal();\n      }\n      return;\n    }\n\n    // Direct video file\n    if (isVideoFileUrl(src)) {\n      if (mode === \"inline\") {\n        const vid = buildHtml5Video(src, autoplay, muted);\n        inner.appendChild(vid);\n        togglePlayOverlay(el, true);\n\n        vid.addEventListener(\"ended\", () => togglePlayOverlay(el, false), { once: true });\n\n        enhanceWithPlyr(vid);\n        setTimeout(() => {\n          try {\n            vid.play();\n          } catch (e) {\n            // Ignore play errors\n          }\n        }, 0);\n      } else {\n        const modal = ensureModal();\n        const modalInner = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__inner`);\n        destroyPlayerAndClear(modalInner);\n\n        const modalRatio = modal.querySelector<HTMLElement>(`.${CSS_PREFIX}-modal__ratio`);\n        if (modalRatio) {\n          if (pt) {\n            modalRatio.style.setProperty(\"--d2f-video-pt\", pt);\n            modalRatio.setAttribute(\"data-video-has-ratio\", \"1\");\n          } else {\n            modalRatio.style.removeProperty(\"--d2f-video-pt\");\n            modalRatio.removeAttribute(\"data-video-has-ratio\");\n          }\n        }\n\n        const vid = buildHtml5Video(src, modalAutoplay, modalMuted);\n        modalInner?.appendChild(vid);\n        enhanceWithPlyr(vid);\n        setTimeout(() => {\n          try {\n            vid.play();\n          } catch (e) {\n            // Ignore play errors\n          }\n        }, 0);\n        openModal();\n      }\n    }\n  };\n\n  // Event listeners\n  el.addEventListener(\"click\", play);\n  el.addEventListener(\"keydown\", (e) => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      e.preventDefault();\n      play(e);\n    }\n  });\n}\n\n/**\n * Initialize all video elements on the page\n */\nexport function init(): void {\n  ensureModal();\n  wireModalClose();\n  // Select both legacy (data-vdo) and new (data-video) elements\n  document.querySelectorAll<VideoElement>(\n    `[${ATTR_LEGACY.ROOT}], [${ATTR_NEW.ROOT}]`\n  ).forEach(initOne);\n}\n\n// ============================================================\n// AUTO-INIT\n// ============================================================\n\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", init);\n} else {\n  init();\n}\n"],
  "mappings": "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",
  "names": ["inner", "e"]
}
